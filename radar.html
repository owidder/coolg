<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" type="text/css" href="./bower_components/materialize/dist/css/materialize.css" media="screen,projection"/>
    <link rel="stylesheet" type="text/css" href="./css/style.css"/>

    <script src="./bower_components/d3/d3.js"></script>
    <script src="./bower_components/lodash/dist/lodash.js"></script>
    <script src="./bower_components/jquery/dist/jquery.js"></script>
    <script src="./bower_components/pouchdb/dist/pouchdb.js"></script>
    <script src="./bower_components/handlebars/handlebars.js"></script>

</head>

<body>
<div class="container">
    <div class="row">
        <div class="col s2">
            <div id="form-segments"></div>
        </div>
        <div class="col s10">
            <div class="svg"></div>
        </div>
    </div>
</div>

<script id="input-segments" type="text/x-handlebars-template">
    <b>Segments</b>
    {{#each segments}}
        <input onkeypress="segmentNameChanged('{{id}}')" class="input" placeholder="Segment name" id="{{id}}" type="text" class="validate" value="{{name}}">
    {{/each}}
</script>


<script src="./js/boot.js"></script>

<script src="./js/SvgLegend.js"></script>

<script src="./js/init.js"></script>
<script src="./js/util.js"></script>
<script src="./js/radar.js"></script>
<script src="./js/ItemField.js"></script>

<script>

    /* global UTIL */
    /* gobal $ */
    /* global SvgLegend */
    /* global Radar */
    
    function draw() {
        var numsegs = $("#numsegs").val();
        var numrings = $("#numrings").val();
        window.location.href = "./radar.html?numsegs=" + numsegs + "&numrings=" + numrings;
    }

    var numberOfSegments = UTIL.param("numsegs", 5);
    $("#numsegs").val(numberOfSegments);
    var numberOfRings = UTIL.param("numrings", 3);
    $("#numrings").val(numberOfRings);

    var svgLegend = new SvgLegend();
    svgLegend.init();

    var radar = new Radar(parseInt(numberOfRings), parseInt(numberOfSegments), svgLegend);
    var itemField = new ItemField();

    radar.showSegments();

    function segmentNameChanged(id) {
        var newName = $("#" + id).val();
        radar.changeSegmentName(id, newName);
    }

</script>
</body>
</html>