<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="svg" style="height: 10000px;width: 3000px;"></div>
<!-- dependencies ... -->

<script src="bower_components/jquery/dist/jquery.js"></script>

<!-- bpmn-js -->
<script src="bower_components/bpmn-js/dist/bpmn-viewer.js"></script>

<script>

    (function() {
        /*
         * from: http://stackoverflow.com/questions/19491336/get-url-parameter-jquery
         */
        function getUrlParameter(sParam) {
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                    sURLVariables = sPageURL.split('&'),
                    sParameterName,
                    i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        };

        var filename = getUrlParameter("fn");

        jQuery.get("bpmn/" + filename + '.bpmn', function (xml) {
            var BpmnViewer = window.BpmnJS;

            var viewer = new BpmnViewer({container: '#svg'});

            if (typeof(xml) == 'object') {
                xml = (new XMLSerializer()).serializeToString(xml);
            }
            viewer.importXML(xml, function (err) {

                if (err) {
                    console.log('error rendering', err);
                } else {
                    console.log('rendered');
                }
            });
        });
    })();


</script>
</body>
</html>
